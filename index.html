<!DOCTYPE HTML>
<html>
  <head>
    <title> reelyActive advlib </title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="web/style/main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.1/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.13.1/ui-bootstrap-tpls.min.js"></script>
    <script type="text/javascript" src="web/js/advlib.js"></script>
  </head>
  <body ng-app="advapp">
    <div ng-controller="InteractionCtrl">
      <nav class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle"
                  ng-init="navCollapsed = true"
                  ng-click="navCollapsed = !navCollapsed">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://context.reelyactive.com">
            <strong>reely</strong>Active
          </a>
        </div>
        <div class="collapse navbar-collapse" ng-class="!navCollapsed && 'in'"
             ng-click="navCollapsed = true">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href> Parsing Mode </a></li>
          </ul>
        </div>
      </nav>
      <tabset justified="true">
        <tab heading="Bluetooth Smart" select="selectBluetooth()"
             active="true">
          <!--________Packet________-->
          <div ng-controller="PacketCtrl">
            <!--________Payload________-->
            <form class="payloadInputDd">
              <select ng-model="payload" ng-change="process()"
                      class="form-control" ng-options="preset.payload as preset.name for preset in presets"
                      style="width:30%">
                <option value=""> -- Choose a preset payload -- </option>
              </select>
              <input ng-model="payload" ng-keyup="process()" type="text"
                     class="form-control" placeholder="Or paste your payload here"
                     style="width:40%">
            </form>
      
            <!--________Bluetooth Smart________-->
            <div class="row">

              <!--________Packet Elements________-->
              <div class="col-xs-12 col-md-6">


              <!-- TODO: fix indents starting here -->
          <h1> Bluetooth Smart Packet Elements </h1>
          <div>
            <accordion close-others="false">
              <accordion-group heading="Header: {{header}}">
                <form>
                  <div>
                    <h4> Header:
                    <input type="text" name="header" ng-model="header" class="form-control" style="width:30%" readonly>
                    </h4>
                  </div>
                  <div>
                    <h4> Type:
                    <select ng-model="bluetooth.packet.advHeader.type" class="form-control" style="width:35%" ng-options="header.name for header in headerType" >
                      <option value="">{{bluetooth.packet.advHeader.type}}</option>
                    </select>
                    </h4>
                  </div>
                  <div>
                    <h4> rxAdd:
                    <span class="btn-group">
                      <label  ng-model="bluetooth.packet.advHeader.rxAdd"  btn-radio="'public'"  class="btn btn-default
                      "/> public </label>
                      <label  ng-model="bluetooth.packet.advHeader.rxAdd"  btn-radio="'random'"  class="btn btn-default
                      "/> random </label>
                    </span>
                    </h4>
                  </div>
                  <div>
                    <h4> txAdd:
                    <span class="btn-group">
                      <label  ng-model="bluetooth.packet.advHeader.txAdd"  btn-radio="'public'" class="btn btn-default
                      "/> public </label>
                      <label  ng-model="bluetooth.packet.advHeader.txAdd"  btn-radio="'random'" class="btn btn-default
                      "/> random </label>
                    </span>
                    </h4>
                  </div>
                  <div>
                    <label for="length">
                      <h4> Length: <input disabled ng-model="bluetooth.packet.advHeader.length" type="number" name="payloadlength" id="length" min="8" max="37" step="1" value="8" class="form-control" style="width:45%">
                    </label>
                  </div>
                </form>
              </accordion-group>
              <accordion-group heading="Address: {{bluetooth.packet.value}}">
                <div class="form1">
                  <h4> Address:
                  <input type="text" name="address" ng-model="bluetooth.packet.value" class="form-control" style="width:35%" readonly>
                  </h4>
                </div>
              </accordion-group>
              <accordion-group heading="Data: {{payloadData}}">
                <div class="form1">
                  <h4> UUID:</h4>
                  <h5 ng-show="bluetooth.packet.advData.nonComplete16BitUUIDs">Non-Complete 16 Bit: <input type="text" name="uuid" value="nonComplete16BitUUIDs" ng-model="bluetooth.packet.advData.nonComplete16BitUUIDs" class="form-control" style="width:50%" readonly> </h5>
                  <h5 ng-show="bluetooth.packet.advData.complete16BitUUIDs">Complete 16 Bit: <input type="text" name="uuid" value="complete16BitUUIDs" ng-model="bluetooth.packet.advData.complete16BitUUIDs" class="form-control" style="width:50%" readonly> </h5>
                  <h5 ng-show="bluetooth.packet.advData.nonComplete128BitUUIDs">Non-Complete 128 Bit: <input type="text" name="uuid" value="nonComplete128BitUUIDs" ng-model="bluetooth.packet.advData.nonComplete128BitUUIDs" class="form-control" style="width:50%" readonly> </h5>
                  <h5 ng-show="bluetooth.packet.advData.complete128BitUUIDs">Complete 128 Bit:<input type="text" name="uuid" value="complete128BitUUIDs" ng-model="bluetooth.packet.advData.complete128BitUUIDs" class="form-control" style="width:50%" readonly>
                  </h5>
                  <h4> Local Name:</h4>
                  <h5 ng-show="bluetooth.packet.advData.completeLocalName">
                  complete:
                  <input type="text" value="completeLocalName" ng-model="bluetooth.packet.advData.completeLocalName" class="form-control" style="width:50%" readonly> <br>
                  </h5>
                  <h5 ng-show="bluetooth.packet.advData.shortenedLocalName">
                  shortened:
                  <input type="text" value="shortenedLocalName" ng-model="bluetooth.packet.advData.shortenedLocalName" class="form-control" style="width:50%" readonly>
                  </h5>
                  <h4> Flags:<br></h4>
                  
                  <input type="checkbox" ng-model="checkedItems['LE Limited Discoverable Mode']" readonly> LE Limited Discoverable Mode
                  <br>
                  
                  <input type="checkbox" ng-model="checkedItems['LE General Discoverable Mode']" readonly> LE General Discoverable Mode
                  <br>
                  
                  <input type="checkbox" ng-model="checkedItems['BR/EDR Not Supported']" readonly> BR/EDR Not Supported
                  <br>
                  
                  <input type="checkbox" ng-model="checkedItems['Simultaneous LE and BR/EDR to Same Device Capable (Controller)']"
                  readonly> Simultaneous LE and BR/EDR to Same Device Capable (Controller)
                  <br>
                  
                  <input type="checkbox" ng-model="checkedItems['Simultaneous LE and BR/EDR to Same Device Capable (Host)']"
                  readonly> Simultaneous LE and BR/EDR to Same Device Capable (Host)
                  <br>
                  
                  <input type="checkbox" ng-model="checkedItems['Reserved']" readonly> Reserved
                  
                  <section>
                    <h4> Manufacturer Specific Data:</h4>
                    <h5 ng-show="bluetooth.packet.advData.manufacturerSpecificData"><b>Generic Data</b></h5>
                    <div ng-show="bluetooth.packet.advData.manufacturerSpecificData">
                      companyIdentifierCode:
                      <input type="text" name="address" ng-model="bluetooth.packet.advData.manufacturerSpecificData.companyIdentifierCode"
                      class="form-control" style="width:50%" readonly>
                      <br> data:
                      <input type="text" name="address" ng-model="bluetooth.packet.advData.manufacturerSpecificData.data"
                      class="form-control" style="width:50%" readonly>
                    </div>
                    <h5 ng-show="bluetooth.packet.advData.manufacturerSpecificData.iBeacon"><b>iBeacon</b></h5>
                    <div ng-show="bluetooth.packet.advData.manufacturerSpecificData.iBeacon">
                      uuid:
                      <input type="text" name="address" ng-model="bluetooth.packet.advData.manufacturerSpecificData.iBeacon.uuid"
                      class="form-control" style="width:50%" readonly>
                      <br> major:
                      <input type="text" name="address" ng-model="bluetooth.packet.advData.manufacturerSpecificData.iBeacon.major"
                      class="form-control" style="width:50%" readonly>
                      <br> minor:
                      <input type="text" name="address" ng-model="bluetooth.packet.advData.manufacturerSpecificData.iBeacon.minor"
                      class="form-control" style="width:50%" readonly>
                      <br> txPower:
                      <input type="text" name="address" ng-model="bluetooth.packet.advData.manufacturerSpecificData.iBeacon.txPower"
                      class="form-control" style="width:50%" readonly>
                      <br>
                    </div>
                  </section>
                  <h4> TX Power Level:
                  <input value="txPower" id="txPowerLevel" ng-model="bluetooth.packet.advData.txPower" class="form-control" style="width:50%" ng-show="bluetooth.packet.advData.txPower" readonly>
                  </h4>
                  <h4> Service Solicitation:</h4>
                  <h5 ng-show="bluetooth.packet.advData.solicitation16BitUUIDs">
                  <span class = "radio">
                    <input type="radio" name="ss" value="16" ng-model="bluetooth.packet.advData.solicitation16BitUUIDs" onclick="this.checked = false;" class="form-control" style="width:50%"> 16 Bit UUIDs<br>
                    <input type="radio" name="ss" value="128" ng-model="bluetooth.packet.advData.solicitation128BitUUIDs" checked onclick="this.checked = false;" class="form-control" style="width:50%"> 128 Bit UUIDs
                  </span>
                  </h5>
                  <h4> Service Data: <br> </h4>
                  <h5 ng-show="bluetooth.packet.advData.serviceData.uuid">
                  uuid:
                  <input type="text" name="address" ng-model="bluetooth.packet.advData.serviceData.uuid" class="form-control" style="width:50%" readonly>
                  </h5>
                  <h5 ng-show="bluetooth.packet.advData.serviceData.data">
                  data:
                  <input type="text" name="address" ng-model="bluetooth.packet.advData.serviceData.data" class="form-control" style="width:50%" readonly>
                  </h5>
                </form>
              </div>
            </div>
          </accordion-group>
        </accordion>
              <!-- TODO: end of indent fixing -->

              </div>

              <!--________JSON________-->
              <div class="col-xs-12 col-md-6">
                <h1> As JSON </h1>
                <pre>{{packet}}</pre>
              </div>

            </div> <!-- End of row -->

          </div>
        </tab>

        <tab heading="reelyActive" select="selectReelyactive()">

          <!--________reelyActive________-->
          <div ng-controller="PacketCtrl">
    
            <form class="form-horizontal">
              <div class="form-group form-group-lg form-group-highlight">
                <label for="reelyPayload" class="col-sm-2 control-label">
                  Raw Payload
                </label>
                <div class="col-sm-10">
                  <input ng-model="payload" ng-keyup="process()" type="text"
                         placeholder="Enter/paste a payload here"
                         class="form-control" id="reelyPayload">
                </div>
              </div>
              <div class="form-group form-group-sm">
                <label for="reelyPresets" class="col-sm-2 control-label">
                  Select from presets
                </label>
                <div class="col-sm-10">
                  <select ng-model="payload" ng-change="process()"
                          class="form-control" ng-options="preset.payload as preset.name for preset in presets"
                          id="reelyPresets">
                    <option value=""> -- Choose a preset payload -- </option>
                  </select>
                </div>
              </div>
            </form>
    
            <div class="row">

              <div class="col-xs-12 col-md-6">

                <h1> reelyActive Packet Elements </h1>

                <div>
                  <accordion close-others="false">
                    <accordion-group is-open="reelyactive.id.open">
                      <accordion-heading>
                        <strong>Identifier:</strong> &nbsp;
                        {{reelyactive.packet.value}}
                        <!-- Should be {{reelyactive.id.value}} -->
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': reelyactive.id.open, 'glyphicon-chevron-right': !reelyactive.id.open}"></i>
                      </accordion-heading>
                      <form class="form-horizontal">
                        <div class="form-group">
                          <label for="reelyId" class="col-xs-2">EUI-64:</label>
                          <div class="col-xs-4">
                            <input type="text" class="form-control" ng-model="reelyactive.packet.value" id="reelyId" readonly>
                          </div>
                        </div>
                      </form>
                    </accordion-group>
                    <accordion-group is-open="reelyactive.flags.open">
                      <accordion-heading>
                        <strong>Flags:</strong> &nbsp;
                        {{reelyactive.packet.flags.transmissionCount}}
                        <!-- Should be {{reelyactive.flags.value}} -->
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': reelyactive.flags.open, 'glyphicon-chevron-right': !reelyactive.flags.open}"></i>
                      </accordion-heading>
                      <form class="form-horizontal">
                        <div class="form-group">
                          <label for="reelyTrans" class="col-xs-3">
                            Transmission count:
                          </label>
                          <div class="col-xs-2">
                            <input type="number" class="form-control" ng-model="reelyactive.packet.flags.transmissionCount"
                                   id="reelyTrans" readonly>
                          </div>
                        </div>
                      </form>
                    </accordion-group>
                    <accordion-group is-open="reelyactive.data.open">
                      <accordion-heading>
                        <strong>Data:</strong> &nbsp;
                        <!-- Should be {{reelyactive.data.value}} -->
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': reelyactive.data.open, 'glyphicon-chevron-right': !reelyactive.data.open}"></i>
                      </accordion-heading>
                      <form class="form-horizontal">
                        <div class="form-group">
                          <label for="reelyBatt" class="col-xs-2">
                            Battery:
                          </label>
                          <div class="col-xs-2">
                            <input type="text" class="form-control"
                                   ng-model="reelyactive.packet.data.battery"
                                   id="reelyBatt" readonly>
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="reelyTemp" class="col-xs-2">
                            Temperature:
                          </label>
                          <div class="col-xs-2">
                            <input type="text" class="form-control" ng-model="reelyactive.packet.data.temperature"
                                   id="reelyTemp" readonly>
                          </div>
                        </div>
                      </form>
                    </accordion-group>
                  </accordion>     
                </div>
              </div>

              <!--________JSON________-->
              <div class="col-xs-12 col-md-6">
                <h1> As JSON </h1>
                <pre>{{packet}}</pre>
              </div>
            </div>
          </div>
        </tab>
      </tabset>
      <footer class="footer">
        <a href="https://github.com/reelyactive/advlib"> advlib </a> &nbsp; | &nbsp;
        <a href="http://context.reelyactive.com"> &copy; reelyActive 2015 </a>
      </footer>
    </div>
  </body>
</html>
